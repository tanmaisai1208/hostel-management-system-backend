// Example of how to use permission middleware in your routes

import express from "express"
import { getStudents, getStudentDetails, updateStudentProfile } from "../controllers/studentController.js"
import { authenticateUser } from "../middleware/auth.js"
import { requirePermission } from "../utils/permissions.js"

const router = express.Router()

// Protect all routes
router.use(authenticateUser)

// Get all students - requires view permission for students_info
router.get("/", requirePermission("students_info", "view"), getStudents)

// Get a specific student - requires view permission for students_info
router.get("/:userId", requirePermission("students_info", "view"), getStudentDetails)

// Update a student - requires edit permission for students_info
router.put("/:userId", requirePermission("students_info", "edit"), updateStudentProfile)

export default router 